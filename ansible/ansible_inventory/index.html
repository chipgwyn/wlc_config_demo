<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Inventory - WLC Config Demo</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Inventory";
        var mkdocs_page_input_path = "ansible/ansible_inventory.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> WLC Config Demo
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../environment_setup/">Environment Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../intro_templating/">Templating Intro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../intro_automation/">Automation Intro</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Ansible</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../ansible_use/">Ansible Demo</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Inventory</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#ansible-ping">Ansible Ping</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ansible-get-facts">Ansible Get Facts</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ansible_config_push/">Config Push</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">WLC Config Demo</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Ansible</li>
      <li class="breadcrumb-item active">Inventory</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="inventory">Inventory</h1>
<p>Firstly we need to define our target host, the host where we'll be pushing our config.
Make sure you are in the <code>wlc_config_demo</code> directory:</p>
<p><code>cd ~/wlc_config_demo</code></p>
<p>Ansible uses an <a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html">inventory</a> file to define
hosts, groups, and different attributes.  You can have multiple inventory files.  The file can be manually filled or be 
generated and filled on-demand by querying some other service like azure or ServiceNow.  Since we only have a single
host, a simple setup, we'll edit the file manually.</p>
<p><code>nano inventory.yml</code></p>
<p>The contents should look like the following:</p>
<pre><code class="language-yaml">wlc:
  hosts:
    somehost.example.com:
      ansible_network_os: cisco.ios.ios
      ansible_connection: ansible.netcommon.network_cli
</code></pre>
<p>Replace <code>somehost.example.com</code> with <code>n-z2wicon6.stjude.org</code>.  This is the name of our wirless lan controller.</p>
<p>When connecting to the host, your 'admin' account must be used.  Each person should have their own admin account setup.
If you are using <code>pod1</code> as your normal account, then the admin account is <code>pod1admin</code>.  Add that so the full config
looks like:</p>
<pre><code class="language-yaml">wlc:
  hosts:
    n-z2wicon6.stjude.org:
      ansible_network_os: cisco.ios.ios
      ansible_connection: ansible.netcommon.network_cli
      ansible_user: pod1admin
</code></pre>
<p>Now hit <code>Ctrl-x</code> to save and exit the editor. Hit <code>y</code> to confirm you want to save.</p>
<p><img alt="Ansible Inventory Edit" src="../ansible-inventory.gif" /></p>
<p>Note that since this is a YAML file, spacing <em>IS</em> important, so be sure the number of leading spaces for each line
is correct.  In the examples, we'll be using the standard of 2 spaces for each level of hierarchy.</p>
<p>Let's perform a couple of simple tests to make sure everything will work as expected. </p>
<h2 id="ansible-ping">Ansible Ping</h2>
<p>First we'll 'ping' the host to make sure our machine can at least reach our WLC.</p>
<p>Run the command <code>ansible -m ping all</code></p>
<pre><code class="language-shell">(venv) chip@sazcisauto1:~/wlc_config_demo$ ansible -m ping all
n-z2wicon6.stjude.org | SUCCESS =&gt; {
    &quot;changed&quot;: false,
    &quot;ping&quot;: &quot;pong&quot;
}
</code></pre>
<p>If your output looks like the above then Congratulations! you've run your first ansible command and proved we can reach
the host at least.</p>
<h2 id="ansible-get-facts">Ansible Get Facts</h2>
<p>Now let's run another command that will actually log into the device and grab some of the devices attributes.  Several
of ansible's functions will rely on data collected from the device to decide what tasks or plays to run.  For example, 
the host could be running Ubuntu 22 or it could be running RHEL 9; it could use an ARM CPU or x64.  We already know this
is a Cisco device running IOS we'll indicate to ansible to collect some basic information about this device.</p>
<p><code>ansible -m ios_facts wlc -k</code></p>
<p>This command will prompt your for an <code>SSH password</code>.  Enter the 'admin' password for your user and hit enter to continue.
The output should look something like the below:</p>
<pre><code class="language-shell">(venv) chip@sazcisauto1:~/wlc_config_demo$ ansible -m ios_facts wlc -k
SSH password:
n-z2wicon6.stjude.org | SUCCESS =&gt; {
    &quot;ansible_facts&quot;: {
        &quot;ansible_net_api&quot;: &quot;cliconf&quot;,
        &quot;ansible_net_gather_network_resources&quot;: [],
        &quot;ansible_net_gather_subset&quot;: [
            &quot;default&quot;
        ],
        &quot;ansible_net_hostname&quot;: &quot;n-z2wicon6&quot;,
        &quot;ansible_net_image&quot;: &quot;bootflash:packages.conf&quot;,
        &quot;ansible_net_iostype&quot;: &quot;IOS-XE&quot;,
        &quot;ansible_net_model&quot;: &quot;C9800-L-C-K9&quot;,
        &quot;ansible_net_operatingmode&quot;: &quot;autonomous&quot;,
        &quot;ansible_net_python_version&quot;: &quot;3.10.12&quot;,
        &quot;ansible_net_serialnum&quot;: &quot;REDACTED&quot;,
        &quot;ansible_net_system&quot;: &quot;ios&quot;,
        &quot;ansible_net_version&quot;: &quot;17.09.05&quot;,
        &quot;ansible_network_resources&quot;: {}
    },
    &quot;changed&quot;: false
}
</code></pre>
<p>If your output looks like the above then, again, Congratulations! you have now succesfully logged into the device and
had ansible run some commands to gather "facts" about the device and return the information to you.</p>
<p>Looking at the output we can see that this is, indeed, a device running "IOS-XE", version "17.09.05", and is a model
number "C9800-L-C-K9".</p>
<p>Let's continue our automation journey by using our templates to push some configuration:</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../ansible_use/" class="btn btn-neutral float-left" title="Ansible Demo"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ansible_config_push/" class="btn btn-neutral float-right" title="Config Push">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../ansible_use/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ansible_config_push/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
